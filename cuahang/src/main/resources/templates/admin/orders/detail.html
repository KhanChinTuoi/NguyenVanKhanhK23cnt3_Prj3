<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Chi tiết hóa đơn</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body { font-family: 'Segoe UI', sans-serif; padding: 30px; background: #f8f9fc; }
        .container { background: white; padding: 40px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.1); max-width: 900px; margin: auto; }
        .header-info { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin: 20px 0; padding: 20px; background: #f1f3f9; border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; margin-top: 25px; }
        th { background: #4e73df; color: white; padding: 15px; text-align: left; }
        td { padding: 15px; border-bottom: 1px solid #eee; }
        .total-box { text-align: right; margin-top: 30px; font-size: 1.8rem; font-weight: bold; color: #e74c3c; border-top: 2px solid #eee; padding-top: 20px; }
        .btn-back { text-decoration: none; color: #4e73df; font-weight: bold; margin-bottom: 20px; display: inline-block; }
        @media print { .btn-print, .btn-back { display: none; } }
    </style>
</head>
<body>
<div class="container">
    <a th:href="@{/admin/orders}" class="btn-back"><i class="fa fa-arrow-left"></i> Quay lại danh sách</a>

    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2 style="color: #2c3e50; margin: 0;">Hóa đơn <span th:text="${'#' + order.maHD}"></span></h2>
        <button onclick="window.print()" class="btn-print" style="padding: 10px 20px; background: #36b9cc; color: white; border: none; border-radius: 5px; cursor: pointer;">
            <i class="fa fa-print"></i> In hóa đơn
        </button>
    </div>

    <div class="header-info">
        <div>
            <p><strong>Khách hàng:</strong> <span th:text="${order.khachHang?.hoTen}"></span></p>
            <p><strong>Số điện thoại:</strong>
                <span th:text="${order.khachHang?.sdt != null ? order.khachHang.sdt : 'Chưa có'}"></span>
            </p>
        </div>
        <div>
            <p><strong>Ngày lập:</strong> <span th:text="${#dates.format(order.ngayLap, 'dd/MM/yyyy HH:mm')}"></span></p>
        </div>
    </div>

    <table>
        <thead>
        <tr>
            <th>STT</th>
            <th>Sản phẩm</th>
            <th>Số lượng</th>
            <th>Đơn giá</th>
            <th>Thành tiền</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="ct, iterStat : ${details}">
            <td th:text="${iterStat.count}"></td>
            <td th:text="${ct.sanPham?.tenSP}"></td>
            <td th:text="${ct.soLuong}"></td>
            <td th:text="${#numbers.formatDecimal(ct.donGia, 0, 'COMMA', 0, 'POINT')} + ' ₫'"></td>
            <td th:text="${#numbers.formatDecimal(ct.soLuong * ct.donGia, 0, 'COMMA', 0, 'POINT')} + ' ₫'"></td>
        </tr>
        </tbody>
    </table> <div class="total-box">
    Tổng thanh toán: <span th:text="${#numbers.formatDecimal(calculatedTotal, 0, 'COMMA', 0, 'POINT')}"></span> ₫
</div>
</div> </body>
</html>